(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds"),r=(e,t)=>{e.textContent=t<10?"0"+t:t};let c;c=setInterval((()=>{const e=(()=>{const e=(new Date).getTime(),t=new Date("9 may 2021").getTime(),o=Math.floor((t-e)/1e3),a=Math.floor(o%60),r=Math.floor(o/60%60);return{differenceDate:o,hours:Math.floor(o/3600),minutes:r,seconds:a}})();e.differenceDate<=0&&(clearInterval(c),e.seconds=0,e.minutes=0,e.hours=0),r(a,e.seconds),r(o,e.minutes),r(t,e.hours)}),1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelectorAll("li"),o=()=>{e.classList.toggle("active-menu")};document.body.addEventListener("click",(a=>{let r=a.target;r.classList.contains("close-btn")&&o(),r.closest(".menu")&&o(),t.forEach((e=>{e===r.parentNode&&o()}));const c=r.closest("menu"),n=r.closest(".menu");c||n||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");e.forEach((e=>{e.addEventListener("click",(()=>{if(document.documentElement.offsetWidth<=768)t.style.display="block";else{t.style.display="block",t.style.opacity=0,o.style.opacity=0;let e=0;const a=setInterval((()=>{if(e+=.1,!(e<=1))return t.style.opacity="1",o.style.opacity="1",void clearInterval(a);t.style.opacity=`${e}`,o.style.opacity=`${e}`}),20)}}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")&&(t.style.display="none"),o=o.closest(".popup-content"),o||(t.style.display="none")}))})(),(()=>{const e=document.querySelector("menu > ul"),t=e=>{e.preventDefault();const t=e.target.href;if(!t)return;const o=t.match(/\#\D+/g),a=document.querySelector(`${o}`).offsetTop,r=setInterval((()=>{document.documentElement.scrollTop<a?scrollBy(0,20):clearInterval(r)}),1)};document.querySelector("main a").addEventListener("click",t),e.addEventListener("click",t)})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let a=e.target;a=a.closest(".service-header-tab"),a&&t.forEach(((e,r)=>{e===a&&(e=>{for(let a=0;a<o.length;a++)e===a?(t[a].classList.add("active"),o[a].classList.remove("d-none")):(t[a].classList.remove("active"),o[a].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-dots");for(let e=0;e<t.length;e++){const t=document.createElement("li");t.classList.add("dot"),0===e&&t.classList.add("dot-active"),o.append(t)}const a=document.querySelectorAll(".dot");let r,c=0;const n=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},l=()=>{n(t,c,"portfolio-item-active"),n(a,c,"dot-active"),c++,c>=t.length&&(c=0),s(t,c,"portfolio-item-active"),s(a,c,"dot-active")},u=()=>{r=setInterval(l,2e3)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, .dot")&&(n(t,c,"portfolio-item-active"),n(a,c,"dot-active"),o.matches("#arrow-left")?c--:o.matches("#arrow-right")&&c++,c<0?c=t.length-1:c>=t.length&&(c=0),o.matches(".dot")&&a.forEach(((e,t)=>{o!==e||(c=t)})),s(t,c,"portfolio-item-active"),s(a,c,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(r)})),e.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&u()})),u()})(),(e=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),n=t.querySelectorAll("input"),s=document.getElementById("total");t.addEventListener("keypress",(e=>{const t=e.key;"INPUT"===e.target.tagName&&t.match(/\D/)&&e.preventDefault()})),t.addEventListener("change",(t=>{t.target;const l=/\D/g;let u=0,d=1,i=1;if(n.forEach((e=>{if(l.test(e.value))return alert("Некорректные данные! Введите необходимое число цифрами!"),void(e.value="")})),!o.value)return n.forEach((e=>{e.value=""})),void(s.textContent=u);r.value&&r.value>1&&(d+=(r.value-1)/10),c.value&&c.value<5?i=2:c.value&&c.value<10&&(i=1.5),o.value&&a.value&&(u=Math.floor(e*o.value*a.value*d*i)),s.textContent=u}))})(100),document.querySelectorAll(".command__photo").forEach((e=>{const t=e.src,o=e.dataset.img;e.addEventListener("mouseover",(()=>{e.src=o})),e.addEventListener("mouseout",(()=>{e.src=t}))})),(()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("form input"),o=/[а-яёА-ЯЁ\s]/,a=/[a-zA-Z\-\@\_\d\.]/,r=/[а-яёА-ЯЁ\s\d\.,\!\?]/,c=/[\+\d()]/,n=/[^а-яёА-ЯЁ\s]/g,s=/[^a-zA-Z\-\@\_\d\.]/g,l=/[^\+\d()]/g,u=/[^а-яёА-ЯЁ\s\d\.,\!\?]/g,d=(e,t,o)=>{const a=e.key,r=e.target;"INPUT"===r.tagName&&r.name===t&&(a.match(o)||e.preventDefault())},i=(e,t,a)=>{const r=e.target;if(r.name===t&&(r.value=r.value.replace(a,"")),"user_name"===t){const e=r.value.match(o)[0].toUpperCase();r.value=r.value.replace(o,e),r.value=r.value.replace(/\s{2,}/g," ")}};e.forEach((e=>{e.addEventListener("keypress",(e=>{switch(e.target.name){case"user_name":d(e,"user_name",o);break;case"user_email":d(e,"user_email",a);break;case"user_phone":d(e,"user_phone",c);break;case"user_message":d(e,"user_message",r)}}))})),t.forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;switch(t.name){case"user_name":t.value&&i(e,"user_name",n);break;case"user_email":t.value&&i(e,"user_email",s);break;case"user_phone":t.value&&i(e,"user_phone",l);break;case"user_message":t.value&&i(e,"user_message",u)}}))}))})(),(()=>{const e=document.querySelectorAll('[name = "user_name"]'),t=document.querySelectorAll('[name = "user_email"]'),o=/\D{2,}/g,a=/\@/g,r=(e,t)=>((e,t)=>t.test(e))(e.value,t)?((e=>{e.style.backgroundColor=""})(e),!0):((e=>{e.style.backgroundColor="#FF8B73"})(e),!1);e.forEach((e=>{e.addEventListener("change",(e=>{const t=e.target;t.dataset.flag=r(t,o)}))})),t.forEach((e=>{e.addEventListener("change",(e=>{const t=e.target;t.dataset.flag=r(t,a)}))}))})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.getElementById("form3"),a=document.createElement("div");a.style.color="white";const r=e=>{e.addEventListener("submit",(t=>{t.preventDefault();const o=e.querySelector('[name = "user_name"]'),r=e.querySelector('[name = "user_email"]');if("false"===o.dataset.flag||"false"===r.dataset.flag)return;e.append(a),a.textContent="Загрузка...";const c=new FormData(e),n={};var s;c.forEach(((e,t)=>{n[t]=e})),(s=n,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).then((e=>{if(200!==e.status)throw new Error("status network not 200");a.textContent="Спасибо! Мы с Вами скоро свяжемся!"})).then((()=>{const e=document.querySelector(".popup");setTimeout((()=>{"none"!==e.style.display&&(e.style.display="none"),a.textContent=""}),3e3)})).catch((e=>{a.textContent="Что-то пошло не так...",console.error(e)})),(e=>{const t=e.querySelectorAll("input"),o=e.querySelector("text-area");t.forEach((e=>{e.value=""})),o&&(o.value="")})(e)}))};r(e),r(t),r(o)})()})();