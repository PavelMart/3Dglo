(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds"),a=(e,t)=>{e.textContent=t<10?"0"+t:t};let c;c=setInterval((()=>{const e=(()=>{const e=(new Date).getTime(),t=new Date("9 may 2021").getTime(),o=Math.floor((t-e)/1e3),r=Math.floor(o%60),a=Math.floor(o/60%60);return{differenceDate:o,hours:Math.floor(o/3600),minutes:a,seconds:r}})();e.differenceDate<=0&&(clearInterval(c),e.seconds=0,e.minutes=0,e.hours=0),a(r,e.seconds),a(o,e.minutes),a(t,e.hours)}),1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelectorAll("li"),o=()=>{e.classList.toggle("active-menu")};document.body.addEventListener("click",(r=>{let a=r.target;a.classList.contains("close-btn")&&o(),t.forEach((e=>{e===a.parentNode&&o()})),a=a.closest(".menu"),a?o():e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");e.forEach((e=>{e.addEventListener("click",(()=>{if(document.documentElement.offsetWidth<=768)t.style.display="block";else{t.style.display="block",t.style.opacity=0,o.style.opacity=0;let e=0;const r=setInterval((()=>{if(e+=.1,!(e<=1))return t.style.opacity="1",o.style.opacity="1",void clearInterval(r);t.style.opacity=`${e}`,o.style.opacity=`${e}`}),20)}}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")&&(t.style.display="none"),o=o.closest(".popup-content"),o||(t.style.display="none")}))})(),(()=>{const e=document.querySelector("menu > ul"),t=e=>{e.preventDefault();const t=e.target.href.substr(23),o=document.querySelector(`${t}`).offsetTop,r=setInterval((()=>{document.documentElement.scrollTop<o?scrollBy(0,20):clearInterval(r)}),1)};document.querySelector("main a").addEventListener("click",t),e.addEventListener("click",t)})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let r=e.target;r=r.closest(".service-header-tab"),r&&t.forEach(((e,a)=>{e===r&&(e=>{for(let r=0;r<o.length;r++)e===r?(t[r].classList.add("active"),o[r].classList.remove("d-none")):(t[r].classList.remove("active"),o[r].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-dots");for(let e=0;e<t.length;e++){const t=document.createElement("li");t.classList.add("dot"),0===e&&t.classList.add("dot-active"),o.append(t)}const r=document.querySelectorAll(".dot");let a,c=0;const n=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},s=()=>{n(t,c,"portfolio-item-active"),n(r,c,"dot-active"),c++,c>=t.length&&(c=0),l(t,c,"portfolio-item-active"),l(r,c,"dot-active")},u=()=>{a=setInterval(s,2e3)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, .dot")&&(n(t,c,"portfolio-item-active"),n(r,c,"dot-active"),o.matches("#arrow-left")?c--:o.matches("#arrow-right")&&c++,c<0?c=t.length-1:c>=t.length&&(c=0),o.matches(".dot")&&r.forEach(((e,t)=>{o!==e||(c=t)})),l(t,c,"portfolio-item-active"),l(r,c,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&u()})),u()})(),(e=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),n=document.getElementById("total");t.addEventListener("keypress",(e=>{const t=e.key;"INPUT"===e.target.tagName&&t.match(/\D/)&&e.preventDefault()})),t.addEventListener("change",(t=>{const l=t.target;if("INPUT"===l.tagName&&/\D/g.test(l.value))return alert("Некорректные данные! Введите необходимое число цифрами!"),void(l.value="");let s=0,u=1,d=1;a.value&&a.value>1&&(u+=(a.value-1)/10),c.value&&c.value<5?d=2:c.value&&c.value<10&&(d=1.5),o.value&&r.value&&(s=Math.floor(e*o.value*r.value*u*d)),n.textContent=s}))})(100),document.querySelectorAll(".command__photo").forEach((e=>{const t=e.src,o=e.dataset.img;e.addEventListener("mouseover",(()=>{e.src=o})),e.addEventListener("mouseout",(()=>{e.src=t}))})),(()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("form input"),o=/[а-яёА-ЯЁ\s]/,r=/[a-zA-Z\-\@\_\.\!\~\*\']/,a=/[а-яёА-ЯЁ\s\d\.,\!\?]/,c=/[^а-яёА-ЯЁ\s]/g,n=/[^a-zA-Z\-\@\_\.\!\~\*\']/g,l=/[^а-яёА-ЯЁ\s\d\.,\!\?]/g;e.forEach((e=>{e.addEventListener("keypress",(e=>{const t=e.key,c=e.target;"INPUT"===c.tagName&&"user_name"===c.name&&(t.match(o)||e.preventDefault()),"INPUT"===c.tagName&&"user_email"===c.name&&(t.match(r)||e.preventDefault()),"INPUT"===c.tagName&&"user_message"===c.name&&(t.match(a)||e.preventDefault())}))})),t.forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;"user_name"===t.name&&(t.value=t.value.replace(c,"")),"user_email"===t.name&&(t.value=t.value.replace(n,"")),"user_message"===t.name&&(t.value=t.value.replace(l,""))}))}))})(),document.querySelectorAll('[name = "user_phone"]').forEach((e=>{e.addEventListener("change",(e=>{const t=e.target;t.dataset.flag=(e=>{const t=e.value;return/^\+?[78]([-()]*\d){10}$/.test(t)?((e=>{e.style.backgroundColor=""})(e),!0):((e=>{e.style.backgroundColor="#FF8B73"})(e),!1)})(t)}))})),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.getElementById("form3"),r=document.createElement("div"),a=e=>{e.addEventListener("submit",(t=>{if(t.preventDefault(),"false"===e.querySelector('[name = "user_phone"]').dataset.flag)return;e.append(r),r.textContent="Загрузка...";const o=new FormData(e),a={};var c;o.forEach(((e,t)=>{a[t]=e})),(c=a,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).then((e=>{if(200!==e.status)throw new Error("status network not 200");r.textContent="Спасибо! Мы с Вами скоро свяжемся!"})).catch((e=>{r.textContent="Что-то пошло не так...",console.error(e)})),(e=>{const t=e.querySelectorAll("input"),o=e.querySelector("text-area");t.forEach((e=>{e.value=""})),o&&(o.value="")})(e)}))};a(e),a(t),a(o)})()})();